---
import EntryRole from "@components/Timeline/EntryDetails/EntryRole.astro";
import { formatPeriod } from "@content/utils";
import type { TimelinableEntry } from "@components/Timeline/types";
import EntryCard from "@components/EntryCard.astro";
import ProjectCard from "@components/ProjectCard.astro";

interface Props {
  entry: TimelinableEntry;
}

const { entry } = Astro.props;
let dateString = formatPeriod(entry.data.start, entry.data.end);
---

{
  entry.collection === "education" ? (
    <EntryCard
      title={entry.data.school}
      subtitle={entry.data.faculty}
      image={entry.data.logo}
      class="bg-primary"
      isTimeline={true}
    >
      <EntryRole
        role={entry.data.degree}
        dateString={dateString}
        slot="subheader"
      />
    </EntryCard>
  ) : entry.collection === "jobs" ? (
    <EntryCard
      title={entry.data.company}
      image={entry.data.logo}
      class="bg-secondary"
      isTimeline={true}
    >
      <EntryRole
        role={entry.data.role}
        dateString={dateString}
        slot="subheader"
      />
    </EntryCard>
  ) : entry.collection === "projects" ? (
    <ProjectCard entry={entry} class="bg-accent" isTimeline={true} />
  ) : (
    (() => {
      throw new Error("Invalid entry collection");
    })()
  )
}
