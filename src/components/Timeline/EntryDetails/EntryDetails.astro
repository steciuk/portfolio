---
import EntryRole from "@components/Timeline/EntryDetails/EntryRole.astro";
import { formatPeriod } from "@content/utils";
import type { TimelineableEntry } from "@components/Timeline/types";
import EntryCard from "@components/EntryCard/EntryCard.astro";
import ProjectCard from "@components/ProjectCard.astro";
import EntryDescription from "@components/EntryCard/EntryDescription.astro";
import EntryTitle from "@components/EntryCard/EntryTitle.astro";
import ProseReference from "@components/ui/prose/ProseReference.astro";

interface Props {
  entry: TimelineableEntry;
}

const { entry } = Astro.props;
let dateString = formatPeriod(entry.data.start, entry.data.end);
---

{
  entry.collection === "education" ? (
    <EntryCard image={entry.data.logo} isTimeline={true}>
      <EntryTitle>{entry.data.school}</EntryTitle>
      <EntryDescription>{entry.data.faculty}</EntryDescription>
      <EntryRole role={entry.data.degree} dateString={dateString} />
      <ul>
        <li>Average grade: {entry.data.grade}/5.00.</li>
        <li>
          <ProseReference reference={entry.data.descriptionReference?.page} />
        </li>
      </ul>
    </EntryCard>
  ) : entry.collection === "jobs" ? (
    <EntryCard image={entry.data.logo} isTimeline={true}>
      <EntryTitle>{entry.data.company}</EntryTitle>
      <EntryRole role={entry.data.role} dateString={dateString} />
      <ProseReference reference={entry.data.descriptionReference.page} />
    </EntryCard>
  ) : entry.collection === "projects" ? (
    <ProjectCard entry={entry} isTimeline={true} />
  ) : (
    (() => {
      throw new Error("Invalid entry collection");
    })()
  )
}
